<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Les repositories | Introduction à Symfony</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Licence Professionnelle SIL - Web et Mobile pour le Commerce Électronique">
    <meta name="robots" content="noindex, nofollow">
    
    <link rel="preload" href="/assets/css/0.styles.e2f7dcf9.css" as="style"><link rel="preload" href="/assets/js/app.f5ffb287.js" as="script"><link rel="preload" href="/assets/js/2.85d345eb.js" as="script"><link rel="preload" href="/assets/js/19.e575b9c0.js" as="script"><link rel="prefetch" href="/assets/js/10.457dba52.js"><link rel="prefetch" href="/assets/js/11.08c438c2.js"><link rel="prefetch" href="/assets/js/12.cbc1776f.js"><link rel="prefetch" href="/assets/js/13.418be2c7.js"><link rel="prefetch" href="/assets/js/14.d52a0530.js"><link rel="prefetch" href="/assets/js/15.21450e21.js"><link rel="prefetch" href="/assets/js/16.872dd91c.js"><link rel="prefetch" href="/assets/js/17.b3e69a97.js"><link rel="prefetch" href="/assets/js/18.62e92111.js"><link rel="prefetch" href="/assets/js/20.2dd543f1.js"><link rel="prefetch" href="/assets/js/21.207e0e56.js"><link rel="prefetch" href="/assets/js/22.d2fc0852.js"><link rel="prefetch" href="/assets/js/23.d71aaa5c.js"><link rel="prefetch" href="/assets/js/24.4a856b70.js"><link rel="prefetch" href="/assets/js/25.886f50e9.js"><link rel="prefetch" href="/assets/js/26.7345d31d.js"><link rel="prefetch" href="/assets/js/27.98540e6e.js"><link rel="prefetch" href="/assets/js/28.6a30ed2d.js"><link rel="prefetch" href="/assets/js/29.932c0b60.js"><link rel="prefetch" href="/assets/js/3.0cf10e4b.js"><link rel="prefetch" href="/assets/js/30.aa92a368.js"><link rel="prefetch" href="/assets/js/31.e026dfd1.js"><link rel="prefetch" href="/assets/js/32.0aec1f2e.js"><link rel="prefetch" href="/assets/js/33.9dd3d5d8.js"><link rel="prefetch" href="/assets/js/4.0a2f3beb.js"><link rel="prefetch" href="/assets/js/5.a33a2f42.js"><link rel="prefetch" href="/assets/js/6.f0091315.js"><link rel="prefetch" href="/assets/js/7.53d7b1d5.js"><link rel="prefetch" href="/assets/js/8.bae4ccb5.js"><link rel="prefetch" href="/assets/js/9.280a7124.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2f7dcf9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Introduction à Symfony</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cours/" class="nav-link router-link-active">
  Cours
</a></div><div class="nav-item"><a href="/projets/" class="nav-link">
  Projets
</a></div><div class="nav-item"><a href="/ressources/" class="nav-link">
  Ressources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cours/" class="nav-link router-link-active">
  Cours
</a></div><div class="nav-item"><a href="/projets/" class="nav-link">
  Projets
</a></div><div class="nav-item"><a href="/ressources/" class="nav-link">
  Ressources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/cours/" aria-current="page" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/#qu-est-ce-qu-un-framework" class="sidebar-link">Qu'est ce qu'un framework ?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/#definition" class="sidebar-link">Définition</a></li><li class="sidebar-sub-header"><a href="/cours/#objectifs-d-un-framework" class="sidebar-link">Objectifs d'un framework</a></li><li class="sidebar-sub-header"><a href="/cours/#avantages-et-inconvenients-d-un-framework" class="sidebar-link">Avantages et inconvénients d'un framework</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/#decouvrir-symfony" class="sidebar-link">Découvrir Symfony</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/#presentation-generale" class="sidebar-link">Présentation générale</a></li><li class="sidebar-sub-header"><a href="/cours/#pourquoi-symfony-et-pas-un-autre" class="sidebar-link">Pourquoi Symfony et pas un autre ?</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/installation.html#prerequis" class="sidebar-link">Prérequis</a></li><li class="sidebar-sub-header"><a href="/cours/installation.html#telecharger-et-installer-symfony" class="sidebar-link">Télécharger et installer Symfony</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/installation.html#parenthese-sur-composer" class="sidebar-link">Parenthèse sur Composer</a></li><li class="sidebar-sub-header"><a href="/cours/installation.html#premier-projet-symfony" class="sidebar-link">Premier projet Symfony</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/installation.html#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/structure.html" class="sidebar-link">Structure du projet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/structure.html#la-console-de-symfony" class="sidebar-link">La console de Symfony</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#la-partie-publique" class="sidebar-link">La partie publique</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#le-code-source-php" class="sidebar-link">Le code source PHP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/structure.html#un-point-sur-le-kernel" class="sidebar-link">Un point sur le Kernel</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/structure.html#les-templates" class="sidebar-link">Les templates</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#les-fichiers-temporaires" class="sidebar-link">Les fichiers temporaires</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/structure.html#le-dossier-var-cache" class="sidebar-link">Le dossier /var/cache/</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#le-dossier-var-log" class="sidebar-link">Le dossier /var/log/</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/structure.html#les-dependances" class="sidebar-link">Les dépendances</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#les-variables-d-environnement" class="sidebar-link">Les variables d'environnement</a></li><li class="sidebar-sub-header"><a href="/cours/structure.html#la-configuration-de-composer" class="sidebar-link">La configuration de Composer</a></li></ul></li><li><a href="/cours/bundle-et-flex.html" class="sidebar-link">Bundles, Flex et auto-configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/bundle-et-flex.html#qu-est-ce-qu-un-bundle" class="sidebar-link">Qu'est ce qu'un bundle ?</a></li><li class="sidebar-sub-header"><a href="/cours/bundle-et-flex.html#symfony-et-flex" class="sidebar-link">Symfony et Flex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/bundle-et-flex.html#nettoyage-du-projet" class="sidebar-link">Nettoyage du projet</a></li></ul></li></ul></li><li><a href="/cours/controleur-et-routing.html" class="sidebar-link">Contrôleur et Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#requete-et-reponse" class="sidebar-link">Requête et réponse</a></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#routing" class="sidebar-link">Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#fonctionnement" class="sidebar-link">Fonctionnement</a></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#configuration-d-une-route" class="sidebar-link">Configuration d'une route</a></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#les-parametres-d-une-route" class="sidebar-link">Les paramètres d'une route</a></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#debug-des-routes" class="sidebar-link">Debug des routes</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#controleur" class="sidebar-link">Contrôleur</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#generer-des-urls" class="sidebar-link">Générer des URLs</a></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#manipuler-l-objet-request" class="sidebar-link">Manipuler l'objet Request</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/controleur-et-routing.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li></ul></li><li><a href="/cours/twig.html" class="sidebar-link">Le moteur de template Twig</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/twig.html#les-templates-dans-symfony" class="sidebar-link">Les templates dans Symfony</a></li><li class="sidebar-sub-header"><a href="/cours/twig.html#la-syntaxe-de-twig" class="sidebar-link">La syntaxe de Twig</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/twig.html#comparaison-entre-php-et-twig" class="sidebar-link">Comparaison entre PHP et Twig</a></li><li class="sidebar-sub-header"><a href="/cours/twig.html#les-filtres" class="sidebar-link">Les filtres</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/twig.html#integration-dans-symfony" class="sidebar-link">Intégration dans Symfony</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/twig.html#generation-de-lien" class="sidebar-link">Génération de lien</a></li><li class="sidebar-sub-header"><a href="/cours/twig.html#gestion-des-assets" class="sidebar-link">Gestion des assets</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/twig.html#heritage-de-templates" class="sidebar-link">Héritage de templates</a></li><li class="sidebar-sub-header"><a href="/cours/twig.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li></ul></li><li><a href="/cours/formulaire.html" class="sidebar-link">Formulaires</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/formulaire.html#creation-d-un-objet-contact" class="sidebar-link">Création d'un objet Contact</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#creation-d-une-classe-de-formulaire" class="sidebar-link">Création d'une classe de formulaire</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#implementation-du-formulaire" class="sidebar-link">Implementation du formulaire</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#affichage-du-formulaire" class="sidebar-link">Affichage du formulaire</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#protection-csrf" class="sidebar-link">Protection CSRF</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#validation-du-formulaire" class="sidebar-link">Validation du formulaire</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#les-messages-flash" class="sidebar-link">Les messages flash</a></li><li class="sidebar-sub-header"><a href="/cours/formulaire.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li></ul></li><li><a href="/cours/injection-dependances.html" class="sidebar-link">L'injection de dépendances</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/injection-dependances.html#definition" class="sidebar-link">Définition</a></li><li class="sidebar-sub-header"><a href="/cours/injection-dependances.html#le-conteneur-d-injection-de-dependances" class="sidebar-link">Le conteneur d'injection de dépendances</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/injection-dependances.html#les-factories" class="sidebar-link">Les factories</a></li><li class="sidebar-sub-header"><a href="/cours/injection-dependances.html#la-configuration" class="sidebar-link">La configuration</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/injection-dependances.html#l-autowiring" class="sidebar-link">L'Autowiring</a></li><li class="sidebar-sub-header"><a href="/cours/injection-dependances.html#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/service.html" class="sidebar-link">Les services avec Symfony</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/service.html#les-services" class="sidebar-link">Les services</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/service.html#creer-un-service" class="sidebar-link">Créer un service</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#utiliser-un-service" class="sidebar-link">Utiliser un service</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#lister-les-services-graces-a-la-console" class="sidebar-link">Lister les services grâces à la console</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#configuration" class="sidebar-link">Configuration</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/service.html#les-parametres" class="sidebar-link">Les paramètres</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/service.html#utilite-et-definition" class="sidebar-link">Utilité et définition</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#utilisation-dans-la-configuration" class="sidebar-link">Utilisation dans la configuration</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#utilisation-dans-un-service" class="sidebar-link">Utilisation dans un service</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/service.html#exemple-utilisation-du-mailer" class="sidebar-link">Exemple : Utilisation du Mailer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/service.html#l-envoi-d-un-email" class="sidebar-link">L'envoi d'un email</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#analyser-ses-envois" class="sidebar-link">Analyser ses envois</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/service.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li><li class="sidebar-sub-header"><a href="/cours/service.html#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/entities.html" class="sidebar-link">Les entités Doctrine</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/entities.html#creer-une-entite" class="sidebar-link">Créer une entité</a></li><li class="sidebar-sub-header"><a href="/cours/entities.html#gerer-l-etat-de-la-base-de-donnees" class="sidebar-link">Gérer l'état de la base de données</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/entities.html#les-migrations" class="sidebar-link">Les migrations</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/entities.html#interagir-avec-doctrine" class="sidebar-link">Interagir avec Doctrine</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/entities.html#insertion" class="sidebar-link">Insertion</a></li><li class="sidebar-sub-header"><a href="/cours/entities.html#modification" class="sidebar-link">Modification</a></li><li class="sidebar-sub-header"><a href="/cours/entities.html#suppression" class="sidebar-link">Suppression</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/entities.html#des-donnees-de-developpement" class="sidebar-link">Des données de développement</a></li><li class="sidebar-sub-header"><a href="/cours/entities.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li><li class="sidebar-sub-header"><a href="/cours/entities.html#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/relations.html" class="sidebar-link">Relations entre entités</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/relations.html#quelques-notions-importantes" class="sidebar-link">Quelques notions importantes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/relations.html#notion-de-proprietaire-et-d-inverse" class="sidebar-link">Notion de propriétaire et d'inverse</a></li><li class="sidebar-sub-header"><a href="/cours/relations.html#notion-d-unidirectionnalite-et-de-bidirectionnalite" class="sidebar-link">Notion d'unidirectionnalité et de bidirectionnalité</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/relations.html#les-types-de-relations" class="sidebar-link">Les types de relations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/relations.html#relation-onetoone" class="sidebar-link">Relation OneToOne</a></li><li class="sidebar-sub-header"><a href="/cours/relations.html#relation-manytoone" class="sidebar-link">Relation ManyToOne</a></li><li class="sidebar-sub-header"><a href="/cours/relations.html#relation-manytomany" class="sidebar-link">Relation ManyToMany</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/relations.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li></ul></li><li><a href="/cours/repositories.html" aria-current="page" class="active sidebar-link">Les repositories</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/repositories.html#les-methodes-de-construction-de-query" class="sidebar-link">Les méthodes de construction de query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/repositories.html#doctrine-query-language-dql" class="sidebar-link">Doctrine Query Language (DQL)</a></li><li class="sidebar-sub-header"><a href="/cours/repositories.html#querybuilder" class="sidebar-link">QueryBuilder</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/repositories.html#recuperer-ses-entites" class="sidebar-link">Récupérer ses entités</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/repositories.html#les-methodes-de-base" class="sidebar-link">Les méthodes de base</a></li><li class="sidebar-sub-header"><a href="/cours/repositories.html#les-methodes-magiques" class="sidebar-link">Les méthodes magiques</a></li><li class="sidebar-sub-header"><a href="/cours/repositories.html#vos-propres-methodes" class="sidebar-link">Vos propres méthodes</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/repositories.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/repositories.html#aides" class="sidebar-link">Aides</a></li></ul></li></ul></li><li><a href="/cours/event-dispatcher.html" class="sidebar-link">L'event dispatcher</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/event-dispatcher.html#le-principe" class="sidebar-link">Le principe</a></li><li class="sidebar-sub-header"><a href="/cours/event-dispatcher.html#envoyer-des-evenements" class="sidebar-link">Envoyer des événements</a></li><li class="sidebar-sub-header"><a href="/cours/event-dispatcher.html#ecouter-les-evenements" class="sidebar-link">Écouter les événements</a></li><li class="sidebar-sub-header"><a href="/cours/event-dispatcher.html#a-vous-de-jouer" class="sidebar-link">A vous de jouer</a></li><li class="sidebar-sub-header"><a href="/cours/event-dispatcher.html#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/mise-en-ligne.html" class="sidebar-link">La mise en ligne</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#personnaliser-les-pages-d-erreur" class="sidebar-link">Personnaliser les pages d'erreur</a></li><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#verifier-son-site-symfony" class="sidebar-link">Vérifier son site Symfony</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#tester-son-application" class="sidebar-link">Tester son application</a></li><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#verifier-la-qualite-du-code" class="sidebar-link">Vérifier la qualité du code</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#deployer-son-site-symfony-en-ligne" class="sidebar-link">Déployer son site Symfony en ligne</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#sans-acces-ssh" class="sidebar-link">Sans accès SSH</a></li><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#avec-acces-ssh" class="sidebar-link">Avec accès SSH</a></li><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#explications-en-details" class="sidebar-link">Explications en détails</a></li></ul></li><li class="sidebar-sub-header"><a href="/cours/mise-en-ligne.html#pour-aller-plus-loin" class="sidebar-link">Pour aller plus loin</a></li></ul></li><li><a href="/cours/plus-loin.html" class="sidebar-link">Pour aller plus loin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/plus-loin.html#sur-symfony" class="sidebar-link">Sur Symfony</a></li><li class="sidebar-sub-header"><a href="/cours/plus-loin.html#s-ameliorer" class="sidebar-link">S'améliorer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cours/plus-loin.html#pourquoi" class="sidebar-link">Pourquoi</a></li><li class="sidebar-sub-header"><a href="/cours/plus-loin.html#comment" class="sidebar-link">Comment</a></li><li class="sidebar-sub-header"><a href="/cours/plus-loin.html#comment-apprendre" class="sidebar-link">Comment apprendre ?</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="les-repositories"><a href="#les-repositories" class="header-anchor">#</a> Les repositories</h1> <p>L'une des principales fonctions de la couche <strong>Modèle</strong> dans une application <strong>MVC</strong>, c'est la récupération des données. Récupérer des données n'est pas toujours évident, surtout lorsqu'on veut récupérer seulement certaines données, les classer selon des critères, etc. Tout cela se fait grâce aux <strong>repositories</strong>, que nous étudions dans ce chapitre.</p> <p>Un <strong>repository</strong> centralise tout ce qui touche à la <strong>récupération de vos entités</strong>. Concrètement, cela veut dire que c'est à l'intérieur de nos repositories que nous ferons nos requêtes SQL ailleurs. On va donc y construire des méthodes pour récupérer une entité par son id, pour récupérer une liste d'entités suivant un critère spécifique. A chaque fois que vous devez récupérer des entités dans votre base de données, vous utiliserez le <strong>repository</strong> de l'entité correspondante.</p> <p>Il existe <strong>un repository par entité</strong>. Cela permet de bien organiser son code. Bien sûr, cela n'empêche pas qu'un repository utilise plusieurs entités, dans le cas d'une <strong>jointure</strong> par exemple.</p> <p>Les <strong>repositories</strong> ne fonctionnent pas par magie, ils utilisent en réalité directement l'<strong>EntityManager</strong> pour faire leur travail. Vous le verrez, parfois nous ferons directement appel à l'EntityManager depuis des méthodes du repository.</p> <h2 id="les-methodes-de-construction-de-query"><a href="#les-methodes-de-construction-de-query" class="header-anchor">#</a> Les méthodes de construction de query</h2> <p>Il existe deux moyens de récupérer les entités : en utilisant du <strong>DQL</strong> ou en utilisant le <strong>QueryBuilder</strong>.</p> <h3 id="doctrine-query-language-dql"><a href="#doctrine-query-language-dql" class="header-anchor">#</a> Doctrine Query Language (DQL)</h3> <p>Le <strong>DQL</strong> n'est rien d'autre que du SQL adapté à la vision par objets que Doctrine utilise. Il s'agit donc de faire ce dont on a l'habitude, des requêtes textuelles comme celle-ci par exemple :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">em</span><span class="token operator">-&gt;</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'SELECT p FROM App\\Entity\\Store\\Product p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$results</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Vous venez de voir votre première requête DQL. Retenez le principe : avec une requête qui n'est rien d'autre que du texte, on effectue le traitement voulu.</p> <h3 id="querybuilder"><a href="#querybuilder" class="header-anchor">#</a> QueryBuilder</h3> <p>Comme son nom l'indique, il sert à construire une requête, <strong>par étape</strong>, en utilisant le principe de la programmation orientée objet. Si l'intérêt n'est pas évident au début, son utilisation se révèle vraiment pratique ! Voici la même requête que précédemment, mais en utilisant le <strong>QueryBuilder</strong> :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$results</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">em</span><span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Un des avantages est qu'il est possible de construire la requête <strong>en plusieurs fois</strong>. Ainsi, vous pouvez développer une méthode qui rajoute une condition à une requête, par exemple pour sélectionner tous les produits visibles. Il suffit pour cela de passer le <strong>QueryBuilder</strong> à une méthode données, et cette méthode peut modifier la requête comme elle veut : ajouter un WHERE, ajouter une jointure, etc. C'est quelque chose qui est beaucoup plus compliqué avec une requête textuelle uniquement ! Pas de panique, on verra des exemples dans la suite du chapitre.</p> <h2 id="recuperer-ses-entites"><a href="#recuperer-ses-entites" class="header-anchor">#</a> Récupérer ses entités</h2> <h3 id="les-methodes-de-base"><a href="#les-methodes-de-base" class="header-anchor">#</a> Les méthodes de base</h3> <p>Vos repositories héritent de la classe <strong>Doctrine\Bundle\DoctrineBundle\Repository\ServiceEntityRepository</strong>, qui propose déjà quelques méthodes très utiles pour récupérer des entités (et en même temps permet de définir nos <strong>Repository</strong> comme des <strong>services</strong>, notamment pour l'autowiring). Ce sont ces méthodes là que nous allons voir ici. Il existe quatre méthodes fournit de base, que voici :</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Que vous ayez défini un repository pour votre classe existe ou non, ces méthodes sont toujours disponibles en utilisant <strong>$em-&gt;getRepository(Product::class)</strong> ! Mais, d'une manière générale, on préfère les définir quand même pour pouvoir les injecter avec l'injection de dépendances.</p></div> <h4 id="find-id"><a href="#find-id" class="header-anchor">#</a> find($id)</h4> <p>La méthode <strong>find($id)</strong> récupère l'entité correspondant à l'id de notre entité fournit en paramètre. Dans le cas de notre <strong>ProductRepository</strong>, elle retourne une instance de Product ou <em>null</em> si il n'y a pas de résultat.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$product</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="findall"><a href="#findall" class="header-anchor">#</a> findAll()</h4> <p>La méthode <strong>findAll()</strong> retourne toutes les entités contenue dans la base de données. Le format du retour est une array d'entités, que vous pouvez parcourir (avec un foreach par exemple) pour utiliser les objets qu'elle contient.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$products</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$products</span> <span class="token keyword">as</span> <span class="token variable">$product</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="findby"><a href="#findby" class="header-anchor">#</a> findBy()</h4> <p>La méthode <strong>findBy()</strong> est un peu plus intéressante. Comme <strong>findAll()</strong>, elle permet de retourner une liste d'entités, sauf qu'elle est capable d'effectuer un filtre pour ne retourner que les entités correspondantes à un ou plusieurs critère(s). Elle peut aussi trier les entités, et même n'en récupérer qu'un certain nombre (pour une pagination, par exemple). La syntaxe est la suivante :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Depuis l'entity Manager ou avec l'injection de dépendance</span>
<span class="token variable">$productRepository</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">em</span><span class="token operator">-&gt;</span><span class="token function">getRepository</span><span class="token punctuation">(</span><span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$products</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">findBy</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Product 1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Critère(s)</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'createdAt'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Tri(s)</span>
    <span class="token number">5</span><span class="token punctuation">,</span>                       <span class="token comment">// Limite</span>
    <span class="token number">0</span><span class="token punctuation">,</span>                       <span class="token comment">// Offset (à partir de la position)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$products</span> <span class="token keyword">as</span> <span class="token variable">$product</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Cet exemple va récupérer toutes les entités ayant comme titre &quot;Product 1&quot;, en les classant par date décroissante et en en sélectionnant 5 à partir du début (0). Elle retourne un array également. Vous pouvez mettre plusieurs entrées dans le tableau des critères, afin d'appliquer plusieurs filtres.</p> <h4 id="findoneby"><a href="#findoneby" class="header-anchor">#</a> findOneBy()</h4> <p>La méthode <strong>findOneBy()</strong> fonctionne sur le même principe que la méthode <strong>findBy()</strong>, sauf qu'elle ne retourne qu'une seule entité. De ce fait, elle ne conserve que le premier argument des critères.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Retourne le produit avec le nom &quot;Product 1&quot;</span>
<span class="token variable">$product</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">findOneBy</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'Product 1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Critère(s)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retourne le dernier produit créé</span>
<span class="token variable">$lastProduct</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">findOneBy</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token comment">// Critère(s)</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">'createdAt'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Tri(s)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Ces méthodes permettent de couvrir pas mal de besoins. Mais pour aller plus loin encore, Doctrine nous offre encore deux autres méthodes.</p> <h3 id="les-methodes-magiques"><a href="#les-methodes-magiques" class="header-anchor">#</a> Les méthodes magiques</h3> <p>Les méthodes magiques sont des méthodes qui n'existent pas dans la classe mais qui sont émulées. Elles sont prises en charge par la méthode PHP <strong>__call()</strong> qui va exécuter du code en fonction du nom de la méthode appelée.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Je vous parle de ces méthodes pour que vous sachiez qu'elles existent, mais je vous déconseille de les utiliser.</p></div> <h4 id="findbyx-value"><a href="#findbyx-value" class="header-anchor">#</a> findByX($value)</h4> <p>Première méthode, en remplaçant « X » par le nom d'une propriété de votre entité. Dans notre cas, pour l'entité <strong>Product</strong>, nous avons donc plusieurs méthodes : <strong>findByName()</strong>, <strong>findByDescription()</strong>, <strong>findByCreatedAt()</strong>, etc.</p> <p>Cette méthode fonctionne comme si vous utilisiez <strong>findBy()</strong> avec un seul critère, celui du nom de la méthode.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Retourne une array de produit avec le nom &quot;Product 1&quot;</span>
<span class="token variable">$products</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">findByName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Product 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="findonebyx-value"><a href="#findonebyx-value" class="header-anchor">#</a> findOneByX($value)</h4> <p>Deuxième méthode, en remplaçant « X » par le nom d'une propriété de votre entité. Dans notre cas, pour l'entité <strong>Product</strong>, nous avons donc plusieurs méthodes : <strong>findOneByName()</strong>, <strong>findOneByDescription()</strong>, <strong>findOneByCreatedAt()</strong>, etc. Cette méthode fonctionne comme <strong>findOneBy()</strong>, sauf que vous ne pouvez mettre qu'un seul critère, celui du nom de la méthode.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Retourne un produit avec le nom &quot;Product 1&quot;</span>
<span class="token variable">$product</span> <span class="token operator">=</span> <span class="token variable">$productRepository</span><span class="token operator">-&gt;</span><span class="token function">findOneByName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Product 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="vos-propres-methodes"><a href="#vos-propres-methodes" class="header-anchor">#</a> Vos propres méthodes</h3> <p>Toutes les méthodes vu précédemment permettent de récupérer vos entités dans la plupart des cas. Simplement, elles montrent rapidement leurs limites lorsqu'on doit faire des jointures, ou effectuer des conditions plus complexes. Pour cela il faudra faire <strong>nos propres méthodes</strong> de récupération.</p> <p>Avant tout, il nous faut créer un repository lié à notre entité, pour cela, assurez-vous que la ligne suivante dans la déclaration de la classe de l'entité concernée est bien définie :</p> <div class="language-php line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-php"><code><span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\</span>Entity</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">repositoryClass</span><span class="token punctuation">:</span> <span class="token attribute-class-name class-name">ProductRepository</span><span class="token operator">::</span><span class="token constant">class</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name class-name-fully-qualified">ORM<span class="token punctuation">\</span>Table</span><span class="token punctuation">(</span><span class="token attribute-class-name class-name">name</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'sto_product'</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Product</span>
<span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Vos repositories ont déjà été créés puisque nous avons généré nos entités avec le <strong>MakerBundle</strong>. Ils se trouvent dans le dossier <strong>src/Repository/</strong>. Il n'est donc pas nécessaire de compléter votre entité.</p></div> <h4 id="decouverte-du-querybuilder"><a href="#decouverte-du-querybuilder" class="header-anchor">#</a> Découverte du QueryBuilder</h4> <p>Voici le <strong>ProductRepository</strong> complété par une première méthode personnalisée équivalente à findAll() :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Repository<span class="token punctuation">\</span>Store</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Entity<span class="token punctuation">\</span>Store<span class="token punctuation">\</span>Product</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>Bundle<span class="token punctuation">\</span>DoctrineBundle<span class="token punctuation">\</span>Repository<span class="token punctuation">\</span>ServiceEntityRepository</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Bridge<span class="token punctuation">\</span>Doctrine<span class="token punctuation">\</span>RegistryInterface</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @method Product|null find($id, $lockMode = null, $lockVersion = null)
 * @method Product|null findOneBy(array $criteria, array $orderBy = null)
 * @method Product[]    findAll()
 * @method Product[]    findBy(array $criteria, array $orderBy = null, $limit = null, $offset = null)
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">ProductRepository</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceEntityRepository</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token class-name type-declaration">RegistryInterface</span> <span class="token variable">$registry</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token variable">$registry</span><span class="token punctuation">,</span> <span class="token class-name static-context">Product</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">myFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// On crée notre un queryBuilder</span>
        <span class="token variable">$qb</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// On récupère un objet query a partir du queryBuilder</span>
        <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// On exécute la query pour obtenir les résultats</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>Cette méthode <strong>myFindAll()</strong> retourne exactement le même résultat qu'un <strong>findAll()</strong>, c'est-à-dire un tableau de toutes les entités Product dans notre base de données.</p> <p>Vous pouvez le voir, faire une simple requête est très facile. Pour mieux le visualiser, je vous propose la même méthode sans les commentaires et en raccourci :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">myFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span>
        <span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Et bien sûr, pour récupérer les résultats depuis un contrôleur, il faut faire comme avec n'importe quelle autre méthode du repository, comme ceci, en ayant injecter au préalable le repository :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$products</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">productRepository</span><span class="token operator">-&gt;</span><span class="token function">myFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Le <strong>QueryBuilder</strong> dispose de plusieurs méthodes afin de construire notre requête. Il y a une ou plusieurs méthodes par partie de requête : le <strong>WHERE</strong>, le <strong>ORDER BY</strong>, le <strong>FROM</strong>, etc.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">findByNameAndCreatedBefore</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\</span>DateTime</span> <span class="token variable">$createdAt</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span>
        <span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.name = :name'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">andWhere</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.createdAt &lt; :createdAt'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.createdAt'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'createdAt'</span><span class="token punctuation">,</span> <span class="token variable">$createdAt</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Les méthodes <strong>select</strong>, <strong>where</strong> et <strong>orderBy</strong> réinitialisent la partie de la query qui les concernent. Il faut les utiliser avec un préfixe add (par exemple addSelect) pour éviter ce comportement.</p></div> <p>Maintenant, voyons un des avantages du <strong>QueryBuilder</strong>. En considérant que la condition &quot;produits publiés durant l'année en cours&quot; est une condition dont on va se resservir souvent. Il faut donc en faire une méthode, que voici :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">private</span> <span class="token keyword">function</span> <span class="token function-definition function">whereCurrentYear</span><span class="token punctuation">(</span><span class="token class-name type-declaration">QueryBuilder</span> <span class="token variable">$qb</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$qb</span>
        <span class="token operator">-&gt;</span><span class="token function">andWhere</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.createdAt BETWEEN :start AND :end'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'start'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>DateTime</span><span class="token punctuation">(</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y'</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'end'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>DateTime</span><span class="token punctuation">(</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y'</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'-12-31'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Vous notez donc que cette méthode ne traite pas une Query, mais bien uniquement le <strong>QueryBuilder</strong>. C'est en cela que ce dernier est très pratique, car faire cette méthode sur une requête en texte simple est possible, mais très compliqué. Il aurait fallu voir si le <strong>WHERE</strong> était déjà présent dans la requête, si oui mettre un <strong>AND</strong> au bon endroit, etc. Bref, pas simple. Pour utiliser cette méthode, voici la démarche :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">myFind</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
<span class="token punctuation">{</span>
    <span class="token comment">// On peut ajouter ce qu'on veut comme condition avant</span>
    <span class="token variable">$qb</span> <span class="token operator">=</span> <span class="token variable">$this</span>
        <span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.name = :name'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// On applique notre condition</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">whereCurrentYear</span><span class="token punctuation">(</span><span class="token variable">$qb</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// On peut ajouter ce qu'on veut après</span>
    <span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.createdAt'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'DESC'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token property">getQuery</span><span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Cette condition peut donc être utilisée dans n'importe laquelle des requêtes créées.</p> <h4 id="les-jointures"><a href="#les-jointures" class="header-anchor">#</a> Les jointures</h4> <p>La possibilité est également offerte de réaliser des <strong>jointures</strong> à l'aide, c'est assez simple à réaliser :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">findOneWithBrand</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Product</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span>
        <span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
        <span class="token comment">// En plus de la jointure, on précise qu'on veut</span>
        <span class="token comment">// récupérer en plus la marque correspondant au produit.</span>
        <span class="token operator">-&gt;</span><span class="token function">addSelect</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.brand'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'b'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p.id = :id'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getOneOrNullResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Ou depuis le <strong>BrandRepository</strong>, pour obtenir la marque avec tous ces produits :</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">findOneWithProducts</span><span class="token punctuation">(</span><span class="token keyword type-hint">int</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Brand</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span>
        <span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">addSelect</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'b.products'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'p'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'b.id = :id'</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">getOneOrNullResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>L'idée est donc la suivante :</p> <ul><li>D'abord on crée une jointure avec la méthode <strong>leftJoin()</strong> (ou join() pour faire l'équivalent d'un <strong>INNER JOIN</strong>). Le premier argument de la méthode est la propriété de l'entité principale (celle qui est dans le <strong>FROM</strong> de la requête) sur lequel faire la jointure. Dans l'exemple, l'entité <strong>Brand</strong> possède une propriété <strong>products</strong>. Le deuxième argument de la méthode est l'alias de l'entité jointe.</li> <li>Puis on sélectionne également l'entité jointe, via un <strong>addSelect()</strong>. En effet, un <strong>select('p')</strong> tout court aurait écrasé le <strong>select('b')</strong> déjà fait par le <strong>createQueryBuilder()</strong>, rappelez-vous !</li></ul> <h4 id="l-objet-query"><a href="#l-objet-query" class="header-anchor">#</a> L'objet Query</h4> <p>Vous l'avez vu, la <strong>Query</strong> est l'objet à partir duquel on extrait les résultats. Il n'y a pas grand chose à savoir sur cet objet en lui-même, car il ne permet pas grand-chose à part récupérer les résultats. Il sert en fait surtout à la gestion du cache des requêtes.</p> <p>Mais détaillons tout de même les différentes façons d'extraire les résultats de la requête. Ces différentes manières sont toutes à maîtriser, car elles concernent chacune un type de requête.</p> <ul><li><strong>getResult()</strong> : Exécute la requête et retourne un tableau contenant les résultats sous forme d'objets. Vous récupérez ainsi une liste des objets, sur lesquels vous pouvez faire des opérations, des modifications, etc.</li> <li><strong>getArrayResult()</strong> : Exécute la requête et retourne un tableau contenant les résultats sous forme de tableaux. Comme avec getResult(), vous récupérez un tableau même s'il n'y a qu'un seul résultat. Mais dans ce tableau, vous n'avez pas vos objets d'origine, vous avez des simples tableaux. Cette méthode est utilisée lorsque vous ne voulez que lire vos résultats, sans y apporter de modification. Elle est dans ce cas plus rapide que son homologue getResult().</li> <li><strong>getScalarResult()</strong> : Exécute la requête et retourne un tableau contenant les résultats sous forme de valeurs. Comme avec getResult(), vous récupérez un tableau même s'il n'y a qu'un seul résultat.</li> <li><strong>getOneOrNullResult()</strong> : Exécute la requête et retourne un seul résultat, ou null si pas de résultat. Cette méthode retourne donc une instance de l'entité (ou null) et non un tableau d'entités comme getResult().</li> <li><strong>getSingleResult()</strong> : Exécute la requête et retourne un seul résultat. Cette méthode est exactement la même que getOneOrNullResult(), sauf qu'elle déclenche une exception Doctrine\ORM\NoResultException si aucun résultat.</li> <li><strong>getSingleScalarResult()</strong> : Exécute la requête et retourne une seule valeur, et déclenche des exceptions si pas de résultat ou plus d'un résultat.</li> <li><strong>execute()</strong> : Exécute la requête. Cette méthode est utilisée principalement pour exécuter des requêtes qui ne retournent pas de résultats (des UPDATE, INSERT INTO, etc.)</li></ul> <h2 id="a-vous-de-jouer"><a href="#a-vous-de-jouer" class="header-anchor">#</a> A vous de jouer</h2> <p>Maintenant que nous savons comment utiliser le <strong>QueryBuilder</strong> et ainsi créer nos propres requêtes, poursuivons notre développement :</p> <ol><li>Dans votre <strong>ProductRepository</strong>, créez une méthode permettant de récupérer les 4 derniers produits ajoutés (en vous basant sur le champ createdAt) et affichez-les sur la page d'accueil.</li> <li>Créez à présent une entité <strong>Comment</strong> permettant de recueillir les avis des visiteurs pour chacun de nos produits (comprenant l'<strong>id</strong>, <strong>un pseudo</strong>, <strong>un message</strong>, <strong>une date et heure de création</strong>). Puis modifiez vos <strong>fixtures</strong> afin de générer un jeu de commentaires</li> <li>Affichez sur la page d'accueil, en dessous des produits en nouveautés, <strong>les 4 produits les plus commentés</strong>.</li> <li>Votre page listant les produits dispose d'un menu des marques, celui-ci est également présent sur la page détail d'un produit. Faites-en sorte d'éviter le contenu dupliqué en créant un <strong>composant partagé</strong> entre ces deux pages.</li> <li>Maintenant que vous disposez de la liste de vos marques sur l'ensemble de vos pages produits, <strong>rendez actif les liens</strong> permettant d'aller voir une <strong>liste de produits en fonction de la marque</strong> sélectionnée (reposez-vous sur l'id de la marque et pensez à garder le <strong>lien cliqué actif</strong> afin de permettre en un seul coup d'oeil la marque sur laquelle on se trouve).</li> <li>Afin de <strong>mutualiser l'affichage des produits</strong> sur la page d'accueil, créez un template <strong>partial</strong> pour un item de la liste et utilisez le dans vos différents templates.</li> <li>Enfin, <strong>affichez les avis</strong> des visiteurs sur chaque produit, <strong>du plus récent au plus ancien</strong>, et rendez le <strong>formulaire d'ajout d'un nouvel avis</strong> fonctionnel.</li> <li><strong>Optimisez toutes les requêtes</strong> de l'application afin d'en <strong>limiter le nombre</strong> au strict minimum.</li></ol> <h3 id="aides"><a href="#aides" class="header-anchor">#</a> Aides</h3> <ul><li><a href="https://symfony.com/doc/current/templates.html#embedding-controllers" target="_blank" rel="noopener noreferrer">Embedding Controllers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://symfony.com/doc/current/templates.html#including-templates" target="_blank" rel="noopener noreferrer">Including Templates<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cours/relations.html" class="prev">
        Relations entre entités
      </a></span> <span class="next"><a href="/cours/event-dispatcher.html">
        L'event dispatcher
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f5ffb287.js" defer></script><script src="/assets/js/2.85d345eb.js" defer></script><script src="/assets/js/19.e575b9c0.js" defer></script>
  </body>
</html>
