(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{407:function(e,s,t){"use strict";t.r(s);var n=t(56),o=Object(n.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"bundles-flex-et-auto-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bundles-flex-et-auto-configuration"}},[e._v("#")]),e._v(" Bundles, Flex et auto-configuration")]),e._v(" "),t("h2",{attrs:{id:"qu-est-ce-qu-un-bundle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#qu-est-ce-qu-un-bundle"}},[e._v("#")]),e._v(" Qu'est ce qu'un bundle ?")]),e._v(" "),t("p",[e._v("Les bundles sont les "),t("strong",[e._v("blocs de construction")]),e._v(" élémentaires de n'importe quelle application Symfony. En fait le framework Symfony est lui même un bundle ! Les bundles permettent de séparer le code en briques "),t("strong",[e._v("fonctionnelles")]),e._v(" et "),t("strong",[e._v("réutilisables")]),e._v(". Ils encapsulent le fonctionnement des diverses composantes telles que les contrôleurs, le modèle, les templates ainsi que les diverses ressources, aussi bien images que CSS.")]),e._v(" "),t("p",[e._v("En d'autres termes, un bundle est un librairie PHP avec une couche qui permet son intégration au sein du framework.")]),e._v(" "),t("p",[e._v("Avant la version 4 de Symfony, il était recommandé d'organiser son code en utilisant les bundles. C'est à dire que le code source de l'application (le dossier "),t("strong",[e._v("/src/")]),e._v(") était divisé en bundle. Ce n'est plus le cas et les bundles doivent être "),t("strong",[e._v("seulement")]),e._v(" utilisés pour "),t("strong",[e._v("partager du code et des fonctionnalités")]),e._v(" d'un projet à un autre.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Les bundles restent très important dans Symfony. Sur internet, on trouve une multitude de bundles nous permettant d'intégrer des fonctionnalités déjà développées.")])]),e._v(" "),t("p",[e._v("Pour être fonctionnels dans votre application, les bundles doivent être définis dans le fichier "),t("strong",[e._v("/config/bundles.php")]),e._v(". Il contient une array associative avec, en clé, le namespace complet la classe du bundle pour l'initialisation, et en valeur, les environnements pour lequel/lesquels ce bundle est activé.")]),e._v(" "),t("p",[e._v("Je vous ai préparé une liste de quelques bundles à connaître/utiliser. Vous pouvez les retrouver dans la partie "),t("RouterLink",{attrs:{to:"/ressources/bundles.html"}},[e._v("ressources/bundles")]),e._v(" de ce site.")],1),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),t("p",[e._v("Symfony 6 vient de sortir et il est possible que certain de ces bundles ne soit pas encore compatible avec cette nouvelle version majeure.")])]),e._v(" "),t("h2",{attrs:{id:"symfony-et-flex"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#symfony-et-flex"}},[e._v("#")]),e._v(" Symfony et Flex")]),e._v(" "),t("p",[e._v("Symfony Flex est un plugin pour Composer qui a été introduit avec Symfony 4. Son but est d'auto-configurer les bundles et composants que vous installez dans votre projet. Pour cela, le bundle doit avoir "),t("strong",[e._v("une recette")]),e._v(", c'est à dire des instructions sur la manière dont il doit être configuré par défaut.")]),e._v(" "),t("p",[e._v("Les bundles et composants disposant d'une recette sont tous référencés sur le site "),t("a",{attrs:{href:"https://flex.symfony.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://flex.symfony.com"),t("OutboundLink")],1),e._v(". Je vous conseille de regarder d'abord sur ce site si vous êtes à la recherche d'une librairie (ou d'un bundle) pour répondre à une fonctionnalité dont vous avez besoin.")]),e._v(" "),t("p",[e._v("Les principales fonctionnalités de Flex sont les suivantes :")]),e._v(" "),t("ul",[t("li",[e._v("Configuration automatique des librairies")]),e._v(" "),t("li",[e._v("Définition d'alias : Il n'est plus nécessaire de taper le nom complet d'un package s'il possède un alias, par exemple "),t("strong",[e._v("composer req admin")]),e._v(" à la place de "),t("strong",[e._v("composer require easycorp/easyadmin-bundle")])]),e._v(" "),t("li",[e._v("Plus besoin non plus de taper "),t("em",[e._v("symfony")]),e._v(" pour installer un package de Symfony ("),t("strong",[e._v("composer req serializer")]),e._v(")")]),e._v(" "),t("li",[e._v("Le fichier "),t("strong",[e._v("/config/bundles.php")]),e._v(" se remplit automatiquement à l'installation d'un bundle, même si celui-ci n'a pas de recette.")])]),e._v(" "),t("h3",{attrs:{id:"nettoyage-du-projet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nettoyage-du-projet"}},[e._v("#")]),e._v(" Nettoyage du projet")]),e._v(" "),t("p",[e._v("Je vous ai précisé dans le chapitre d'installation qu'il y avait deux façons de commencer un projet Symfony :")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("symfony/website-skeleton")]),e._v(" : C'est la méthode que nous avons utilisée. Notre projet est initialisé avec beaucoup de dépendances.")]),e._v(" "),t("li",[t("strong",[e._v("symfony/skeleton")]),e._v(" : Le projet est initialisé avec le minimum de dépendances. Il faut ensuite les installer une à une, ou au fur et à mesure que le projet grossit.")])]),e._v(" "),t("p",[e._v("Puisque nous avons choisi la première solution, nous allons nous servir de Flex, non pas pour configurer, mais pour dé-configurer les dépendances dont nous nous ne servirons pas.")]),e._v(" "),t("h4",{attrs:{id:"suppression-des-packages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#suppression-des-packages"}},[e._v("#")]),e._v(" Suppression des packages")]),e._v(" "),t("p",[e._v("La suppression des packages se fait en une étape en utilisant la commande Composer "),t("strong",[e._v("remove")]),e._v(" :")]),e._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("composer")]),e._v(" rem package-name-or-alias\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("Voici la liste des package que nous pouvons supprimer dans notre cas : "),t("strong",[e._v("phpdocumentor/reflection-docblock annot expression-language http-client process proxy-manager-bridge serializer web-link phpunit/phpunit browser-kit css-selector phpunit-bridge")])]),e._v(" "),t("p",[e._v("Notre projet est déjà plus léger ! Vous devriez avoir remarqué que certains dossiers et fichiers (principalement de configurations) ont disparus. Par exemple, le dossier des "),t("em",[e._v("/tests")]),e._v(" à la racine du projet n'est plus présent.")])])}),[],!1,null,null,null);s.default=o.exports}}]);